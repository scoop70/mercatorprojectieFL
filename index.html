<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="utf-8">
  <title>Flevoland Mercator vs RD Split</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/>
  <style>
    body { margin:0; padding:0; display:flex; height:100vh; }
    #map1, #map2 { flex:1; }
    #map1 { border-right: 2px solid #888; }
  </style>
</head>
<body>
  <div id="map1"></div>
  <div id="map2"></div>

  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <script src="https://unpkg.com/proj4/dist/proj4.js"></script>
  <script src="https://unpkg.com/proj4leaflet"></script>
  <script src="https://rawcdn.githack.com/jieter/Leaflet.Sync/master/L.Map.Sync.js"></script>

  <script>
    // RD CRS definitie
    const rdCrs = new L.Proj.CRS('EPSG:28992',
      '+proj=sterea +lat_0=52.15616055555555 ' +
      '+lon_0=5.38763888888889 +k=0.9999079 ' +
      '+x_0=155000 +y_0=463000 +ellps=bessel ' +
      '+towgs84=565.417,50.3319,465.552,-0.398957,0.343988,-1.8774,4.0725 +units=m +no_defs',
      {
        resolutions: [
          3440.64, 1720.32, 860.16, 430.08, 215.04, 107.52,
          53.76, 26.88, 13.44, 6.72, 3.36, 1.68, 0.84, 0.42
        ],
        origin: [-285401.92, 903401.92],
        bounds: L.bounds([-285401.92, 22598.08], [595401.92, 903401.92])
      }
    );

    // Mercator kaart (links)
    const map1 = L.map('map1', {
      center: [52.5, 5.5],
      zoom: 9,
      crs: L.CRS.EPSG3857
    });

    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: '&copy; <a href="https://www.openstreetmap.org/">OSM</a>'
    }).addTo(map1);

    // RD kaart (rechts)
    const map2 = L.map('map2', {
      center: [52.5, 5.5],
      zoom: 3,
      crs: rdCrs
    });

    L.tileLayer(
      "https://service.pdok.nl/brt/achtergrondkaart/tms/1.0.0/standaard/EPSG:28992/{z}/{x}/{y}.png",
      {
        tms: true,
        attribution: "Kaart: PDOK BRT Achtergrondkaart",
        minZoom: 0,
        maxZoom: 13
      }
    ).addTo(map2);

    // === Flevoland GeoJSON van PDOK ===
    fetch("https://api.pdok.nl/kadaster/bestuurlijkegebieden/ogc/v1/collections/provinciegebied/items")
      .then(r => r.json())
      .then(data => {
        const flevoland = L.geoJSON(data, {
          filter: f => f.properties.naam === "Flevoland",
          style: { color: "red", fillOpacity: 0.2 }
        });
        flevoland.addTo(map1);
        flevoland.addTo(map2);
        map1.fitBounds(flevoland.getBounds());
        map2.fitBounds(flevoland.getBounds());
      });

    // Synchroniseer beide kaarten
    map1.sync(map2);
    map2.sync(map1);
  </script>
</body>
</html>
